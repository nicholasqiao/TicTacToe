<html>
<head>
	<link rel="stylesheet" type="text/css" href="gamepage.css">
	<title>Game Page</title>
    <script>
        function getGameState() {
            var xmlhttp;
            var isFound = false;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var strResult = xmlhttp.responseText;
                    for (var i = 0; i < 9; i++)
                    {
                        var image;
                        if (strResult[i] == "X")
                        {
                            image = "<a href='#'><img src='./i/x.png'/></a>";
                        }
                        else if (strResult[i] == "O")
                        {
                            image = "<a href='#'><img src='./i/o.png'/></a>";
                        }

                        if (image != null)
                        {
                            switch (i)
                            {
                                case 0:
                                    document.getElementById("a").innerHTML = image;
                                    break;
                                case 1:
                                    document.getElementById("b").innerHTML = image;
                                    break;
                                case 2:
                                    document.getElementById("c").innerHTML = image;
                                    break;
                                case 3:
                                    document.getElementById("d").innerHTML = image;
                                    break;
                                case 4:
                                    document.getElementById("e").innerHTML = image;
                                    break;
                                case 5:
                                    document.getElementById("f").innerHTML = image;
                                    break;
                                case 6:
                                    document.getElementById("g").innerHTML = image;
                                    break;
                                case 7:
                                    document.getElementById("h").innerHTML = image;
                                    break;
                                case 8:
                                    document.getElementById("i").innerHTML = image;
                                    break;
                            }
                        }
                    }
                }
            }
            xmlhttp.open("GET", "./common/getBoard.php", true);
            xmlhttp.send();
        }

        window.setInterval(
            function () {
                getGameState();
            }
            , 1000);

</script>
</head>
<body>
	<h1>Tic Tac Toe</h1>
	<div id="wrapper">
		<div id="playfield">
			<table>
				<tr>
					<td height="200" width="200" id="a">  </td>
					<td height="200" width="200" id="b"> </td>
					<td height="200" width="200" id="c">  </td>
				</tr>
				<tr>
					<td height="200" width="200" id="d">  </td>
					<td height="200" width="200" id="e">  </td>
					<td height="200" width="200" id="f">  </td>
				</tr>
				<tr>
					<td height="200" width="200" id="g">  </td>
					<td height="200" width="200" id="h">  </td>
					<td height="200" width="200" id="i">  </td>
				</tr>
			</table>
		</div>

		<div id="chatbox">
		</div>
	</div>
</body>
</html>